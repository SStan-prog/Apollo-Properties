---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Home/Header';
import Contact from '../../components/Contact';
import { getAllListings } from '../../sanity/api.js';

export async function getStaticPaths() {
  const listings = await getAllListings();

  const acitveListings = listings.filter((listing: any) => {
    if (!listing.hideListing) return listing;
  });

  return acitveListings.map((listing: { slug: { current: any } }) => ({
    params: { slug: listing?.slug?.current },
    props: { listing },
  }));
}

const { listing } = Astro.props;
---

<Layout title={'test'} description={'test'}>{listing.name}</Layout>
