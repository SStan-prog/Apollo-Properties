---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Home/Header';
import Contact from '../../components/Contact';
import { getAllListings } from '../../sanity/api.js';
import Listing from '../../components/Listings/index';

export async function getStaticPaths() {
  const listings = await getAllListings();

  const acitveListings = listings.filter((listing: any) => {
    if (!listing.hideListing) return listing;
  });

  return acitveListings.map((listing: { slug: { current: any } }) => ({
    params: { slug: listing?.slug?.current },
    props: { listing },
  }));
}

const { listing } = Astro.props;
console.log(listing);
---

<Layout title={listing.name} description={listing.description}>
  <!-- <Listing listings={listing} client:load /> -->
</Layout>
