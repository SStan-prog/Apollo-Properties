---
import { getAllListings } from 'sanity/api';
const listings = await getAllListings();

const activeListings = listings.filter((listing: any) => {
  if (!listing.hideListing) return listing;
});

import Layout from 'layouts/Layout.astro';
import Header from 'components/Common/Header.astro';
import Listings from 'components/Listings/index.astro';
import FinalCta from 'components/Common/FinalCta.astro';
---

<Layout
  title="Available Listings"
  description="Fully Furnished or Fully Equipped Apartments, are apartments that allow people arriving directly from overseas a very easy transition into life here in Japan."
>
  <Header heading={'Available Listings'} />
  <Listings listings={activeListings} client:load />
  <FinalCta />
</Layout>
